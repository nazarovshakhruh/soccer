<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Khiva PS Sports Page</title>
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="stylesheet" href="style.css"/>
  <script src="script.js"></script>
</head>
<body>
  <div id="blur-overlay"></div>
  <div class="overl1" id="overl1" onclick="closeMenu()"></div>
 <div class="spacer">
  <div class="inner">
    <span id="dimensia"></span>
    <span id="datetime"></span>
    <span class="power">
      Built by <b>@nzrvv1222</b>
    </span>
  </div>
 </div>
  <!-- Slide-in Menu -->
  <div class="side-menu" id="sideMenu">
    <div class="shit">
      <img onclick="location.reload()" href="#" class="logo sdmenu" src="/assets/img.png" alt="logo">
      <div class="closebtn">
        <span onclick="closeMenu()">
          <img src="/assets/close.png">
        </span>
      </div>
    </div>
    <h1>KPS Sports</h1>
    <ul>
      <li onclick="location.reload()"><a href="#">home</a></li>
      <li><a href="/mdway/">Football</a></li>
      <li><a href="upcoming.html">Volleyball</a></li>
      <li><a href="upcoming.html">Table Tennis</a></li>
      <li><a href="/fixtures/">Fixtures</a></li>
      <li><a href="/fixturesjr/">Fixtures JR</a></li>
      <li><a href="#contactbar">contact</a></li>
    </ul>
  </div>

  <!-- Navbar -->
  <nav class="navbar">
    <div class="menu-btn" onclick="toggleMenu()">
      <span></span>
      <span></span>
      <span></span>
    </div>
    <img onclick="location.reload()" href="#" class="logo navlogo" width="100px" src="/assets/img.png" alt="logo">
    <ul>
      <li onclick="location.reload()"><a href="#">home</a></li>
      <li><a href="/mdway/">Football</a></li>
      <li><a href="upcoming.html">Volleyball</a></li>
      <li><a href="upcoming.html">Table Tennis</a></li>
      <li><a href="/fixtures/">Fixtures</a></li>
      <li><a href="/fixturesjr/">Fixtures JR</a></li>
      <li><a href="#contactbar">contact</a></li>
    </ul>
  </nav>

  <!-- Fullscreen Hero Section -->
   <div class="overall">
     <section class="section">
      <div class="innerbody">
        <div onclick="opennew1()" class="half fhalf">
          <div class="img mg1"></div>
          <div class="goon">
            <h1>Tiki-Taka demolished Gamburg with a dominant 6–1 victory.</h1>
            <h4>Senior League</h4>
          </div>
        </div>
        <div class="half shalf">
          <div class="news">
            <div onclick="opennew2()" class="new hs">
              <div class="img mg2"></div>
              <h4>Tiki-Taka and Apex FC completed a player exchange involving Nuraziz and Akbar.</h4>
            <h5>Fabrizio Romano</h5>
              
            </div>
            <div onclick="opennew3()" class="new">
              <div class="img mg3"></div>
              <h4>Blitz FC thrashed Casio FC 1–5</h4>
            <h5>Junior League</h5>
            </div>
          </div>
          <div class="matches" id="fixtures">
            <div class="heading"> 
              <h3 class="title">Fixtures</h3> 
              <span onclick="opengoof()"> <img src="/assets/next.png">
               </span> 
            </div>
          </div>
          
        </div>
      </div>
     </section>
   </div>

<!-- Split Section -->
<section class="second-section">
  <div onclick="opengm()" class="top-half">
    <video id="bir" muted loop playsinline class="bg-video">
      <source src="/assets/top-video.mp4" type="video/mp4">
    </video>
    <h2 class="tut">football.</h2>
  </div>
  <div id="bthlf" class="bottom-half">
    <div onclick="openu()" class="bottom-left">
      <video id="ikki" muted loop playsinline class="bg-video">
        <source src="/assets/left-video.mp4" type="video/mp4">
      </video>
      <p class="tut">volleyball.</p>
    </div>
    <div onclick="openu()" class="bottom-right">
      <video id="uch" muted loop playsinline class="bg-video">
        <source src="/assets/right-video.mp4" type="video/mp4">
      </video>
      <p class="tut">table tennis.</p>
    </div>
  </div>
</section>
<section id="contactbar" class="feedback">
  <div class="infed">
    <div class="trd ftrd">
      <h1>Info</h1>
      <p>The website is still under development. <br>Custom player avatars can be requested via <b>developer contact</b>. <br><i>Shohrux Nazarov&nbsp; 11-green</i></p>
    </div>
    <div class="trd strd">
      <div class="prt">
        <h1>Contact</h1>
        <p>Questions, suggestions, feedback, and recommendations are welcome via personal direct messages on <b>Telegram</b>.</p>
      </div>
      <a href="https://t.me/nzrvv1222" class="cont">MESSAGE</a>
    </div>
    <div class="trd ttrd">
      <h1>Social Media</h1>
      <div class="media">
        <div onclick="opentg()" class="ps tg">
          <img src="/assets/tg.png" alt="Telegram">
        </div>
        <div onclick="openig()" class="ps insta">
          <img src="/assets/lg2.png" alt="Instagram">
        </div>
        <div onclick="openyt()" class="ps yt">
          <img src="/assets/lg3.png" alt="YouTube">
        </div>
      </div>
    </div>
  </div>
</section>
<section class="white">
  <h3><b>© 2025</b></h3>
  <h3>Uzbekistan, Khorezm, Khiva, Presidential School in Khiva. </h3>
</section>
<script>
    const pxl = Math.round(window.devicePixelRatio);
    function updateDimensions() {
      const physicalWidth = Math.round(window.innerWidth * window.devicePixelRatio);
      const physicalHeight = Math.round(window.innerHeight * window.devicePixelRatio);
      const pxl = Math.round(window.devicePixelRatio);
      document.getElementById('dimensia').innerHTML = physicalWidth + 'x' + physicalHeight + '   Pixel Ratio: ' + pxl;
    }
    var amt = '375px';

function updateAmount() {
  const physicalWidth = Math.round(window.innerWidth * window.devicePixelRatio);
  const physicalHeight = Math.round(window.innerHeight * window.devicePixelRatio);
  console.log(physicalWidth)
  if (window.innerWidth < 650) { // use <, not <<
    amt = '175px + 50vw';
    console.log('small screen');
    document.getElementById('sideMenu').style.borderTopLeftRadius = '15px';
    document.getElementById('sideMenu').style.borderBottomLeftRadius = '15px';
  } else {
    amt = '375px';
    console.log('large screen');
        document.getElementById('sideMenu').style.borderTopLeftRadius = '0px';
    document.getElementById('sideMenu').style.borderBottomLeftRadius = '0px';
  }
}

// Call once at the start
updateAmount();

// Call on every resize
window.addEventListener('resize', updateAmount);

  // Call once at start
  updateDimensions();

  // Update on resize
  window.addEventListener('resize', updateDimensions);
  function toggleMenu() {
    const menu = document.getElementById('sideMenu');
    const overl1 = document.getElementById('overl1');
    menu.style.transform = 'translateX(calc(' + amt + '))';
    overl1.style.background = 'rgba(0, 0, 0, 0.7)';
    overl1.style.pointerEvents = 'auto'; 
    // document.querySelector('body').style.overflowY = 'hidden';
  }
function closeMenu() {
  const menu = document.getElementById('sideMenu');
  const overl1 = document.getElementById('overl1');
  menu.style.transform = 'translateX(0vw)';
  overl1.style.background = 'rgba(0, 0, 0, 0)';
    // document.querySelector('body').style.overflowY = 'scroll';
  overl1.style.pointerEvents = 'none'; 
}
document.querySelectorAll('.top-half, .bottom-left, .bottom-right').forEach(section => {
    const video = section.querySelector('video');

    section.addEventListener('mouseenter', () => {
      video.play();
      document
    });

    section.addEventListener('mouseleave', () => {
      video.pause();
      // Removed: video.currentTime = 0;
    });
  });
  function open1() {
    window.location.href = "https://kps-sports.netlify.app/standings";
  }
  function openu() {
    window.location.href = "/upcoming.html";
  }
  function opentg() {
    window.open("https://t.me/khivaps_sports", "_blank");
  }
  function openig() {
    window.open("https://www.instagram.com/xiva.pmrasmiy/", "_blank");
  }
  function openyt() {
    window.open("https://l.instagram.com/?u=https%3A%2F%2Fyoutube.com%2F%40xivashahridagiprezidentmaktabi%3Fsi%3DMWelSHHFCIwThyub%26fbclid%3DPAZXh0bgNhZW0CMTEAAafTt6lDuDwyrWscWpzUMcRq9qoQmU6XgkyVqTViFuXJgksPYWI_G8bYT1MsXg_aem_AKw4ke4hwInCUNEED9cRwg&e=AT19VyjpfdIYVrZLPVfnSdtAbHO2vlrxwcQkLrXyqvzqDtw4iK5dbVaYH-BgFC1gIaHWSU4pJbGmZdQ42lyFY9snWOibLWrHbqAaSBDr8g", "_blank");
  }
          function opengm() {
            window.location.href = "/mdway/";
        }
                  function opengoof() {
            window.location.href = "/fixtures/";
        }
                          function opennew1() {
            window.location.href = "/matches/m6";
        }
                                  function opennew2() {
            window.location.href = "/teams/tiki-taka";
        }
                                  function opennew3() {
            window.location.href = "/matchesjr/m5";
        }
        

async function loadFixtures() {
  const res = await fetch("/assets/db.json");
  const db = await res.json();

  const teams = db.clubs || [];
  const teamName = id => teams.find(t => t.id === id)?.name || "Unknown";
  const teamCrest = id => teams.find(t => t.id === id)?.crest || "";

  const container = document.getElementById("fixtures");

  // Remove everything after the heading
  while (container.children.length > 1) {
    container.removeChild(container.lastChild);
  }

  // sort matches by date
  const matches = (db.matches || []).slice().sort((a, b) => new Date(a.date) - new Date(b.date));

  let currentDate = "";
  matches.forEach(match => {
    const matchDate = new Date(match.date);

    // Format like "Sat 26 Jul"
    const dateHeading = matchDate.toLocaleDateString("en-GB", {
      weekday: "short",
      day: "numeric",
      month: "short"
    });

    if (dateHeading !== currentDate) {
      currentDate = dateHeading;
      const h3 = document.createElement("h3");
      h3.textContent = dateHeading;
      container.appendChild(h3);
    }

    const home = teamName(match.home_team);
    const away = teamName(match.away_team);
    const homeCrest = teamCrest(match.home_team);
    const awayCrest = teamCrest(match.away_team);

    let score;
    if (match.home_goals != null && match.away_goals != null) {
      score = `<h2>${match.home_goals} - ${match.away_goals}</h2>`;
    } else {
      score = `<h2 class="tim">${matchDate.toLocaleTimeString("en-GB", {
        hour: "2-digit",
        minute: "2-digit"
      })}</h2>`;
    }

    const div = document.createElement("div");
    div.className = "match";
    div.onclick = () => {
  window.location.href = `/matches/${match.id}`;
};

    div.innerHTML = `
      <div class="part part1">
        <h4>${home}</h4>
        <img class="club" src="${homeCrest}" alt="${home} crest">
      </div>
      ${score}
      <div class="part part2">
        <img class="club" src="${awayCrest}" alt="${away} crest">
        <h4>${away}</h4>
      </div>
    `;
    container.appendChild(div);
  });
}

loadFixtures();

  </script>
</body>
</html>
